
@{
    ViewBag.Title = "AprovateEvent";
    Layout = "~/Views/Shared/_Layout.cshtml";

    @Styles.Render("~/Content/stylemetada")
    <h2 class="text-black border-bottom border-info shadow-lg mt-05">APROBAR EVENTO</h2>
}

<div class="btn_align" style="text-align:center">
    <div class="btn-group" style="display:inline-block; margin:0 auto; margin-bottom:1rem;" role="group" aria-label="Basic radio toggle button group">
        <input type="radio" class="btn-check" name="btnradio" id="btnradio1" autocomplete="off" checked>
        <label class="btn gradientechange-2" for="btnradio1">Eventos a aprobar</label>

        <input type="radio" class="btn-check" name="btnradio" id="btnradio2" autocomplete="off">
        <label class="btn gradientechange-2" for="btnradio2">Eventos aprobados</label>

        <input type="radio" class="btn-check" name="btnradio" id="btnradio3" autocomplete="off">
        <label class="btn gradientechange-2" for="btnradio3">Eventos cancelados</label>

        <input type="radio" class="btn-check" name="btnradio" id="btnradio4" autocomplete="off">
        <label class="btn gradientechange-2" for="btnradio4">Eventos culminados</label>
    </div>
</div>


<button id="mostrarevent" onclick="mostrar()" style="display:none">click</button>

<div id="eventpend" class="container"></div>

<div id="eventaprovated" style="display:none;" class="container"></div>

<div id="eventre" style="display:none;" class="container"></div>

<div id="eventcomplete" style="display:none;" class="container"></div>
<script>



    var data = { data: 1 };

    const list1 = document.getElementById("eventpend"); // pendientes estado 4
    const list2 = document.getElementById("eventaprovated"); //aprobados estado 2
    const list3 = document.getElementById("eventre");
    const list4 = document.getElementById("eventcomplete");

    function clickButton() {
        document.querySelector('#mostrarevent').click();
    }

    setTimeout(clickButton, 1000);

        function mostrar() {
            let url = "@Url.Action("Evento", "Home")";

            $.post({
                url, data})
                .fail(function () {
                    alert("error");
                })
                .done(function (data) {
                    // variables modal
                    console.log(data);
                    for (var i in data.data) {

                        if (data.data[i].Transporte == "C") {
                            var tr = "Si";
                        } else tr = "No";
                        if (data.data[i].estado == 4) {
                            list1.innerHTML += `<div id="cardtext" class="container bg-light text-center shadow-lg">
                                                    <div class="card-body row rounded" style="background-color: black;width: 30em;margin: 0 auto;">
                                                        <div class="row m-0 gradientechange-2 mt-3 ">
                                                            <img class="img-fluid"  style="max-width: 100%;max-height:15em" src="https://img.freepik.com/foto-gratis/empresario-corporativo-dando-presentacion-gran-audiencia_53876-101865.jpg" alt="Alternate Text" />
                                                        </div>
                                                     <div class="card-header ">
                                                            <h3 class="text-gradientechange m-0">
                                                                Evento: ${data.data[i].Nombre}
                                                            </h3>
                                                    </div>
                                                    <div class="row m-0 mt-2">
                                                        <div class="d-flex justify-content-around align-items-center">
                                                            <p class="card-text text-light fontline me-2" style="display:none"> Idevento ${data.data[i].IdEvento}</p>
                                                            <p class="card-text IdEvento text-black fontline me-2" >${data.data[i].IdEvento}</p>
                                                            <p class="card-text text-light fontline me-2">Fecha:${data.data[i].Fecha}</p>
                                                             <p class="card-text text-light fontline me-2">Transporte:${tr}</p>
                                                            <button type="button" class="aprobated btn btn-primary">Aprobar</button>
                                                             <button type="button"  class="desaprobated btn btn-danger">Descartar</button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="card-footer text-muted">
                                                    2 days ago
                                                </div>
                                            </div>`;
                            $(list1).find(".aprobated").click(function () {

                                var buttons = document.querySelectorAll(".aprobated");
                                buttons.forEach(function (button) {
                                    button.addEventListener("click", function (event) {

                                        var tarjeta = event.target.parentNode;
                                        var idEvento = tarjeta.querySelector("p.IdEvento").innerHTML;
                                        console.log(parseInt(idEvento))
                                        AprobarEvent(idEvento)
                                    });
                                });

                            });
                            $(list1).find(".desaprobated").click(function () {
                                var buttons = document.querySelectorAll(".desaprobated");
                                buttons.forEach(function (button) {
                                    button.addEventListener("click", function (event) {
                                        var tarjeta = event.target.parentNode;

                                        var idEvento = tarjeta.querySelector("p.IdEvento").innerHTML;
                                        console.log(idEvento)
                                        DescEventoC(idEvento)
                                    });
                                });

                            });

                        } else if (data.data[i].estado == 2) {
                            list2.innerHTML += `<div id="cardtext" class="container bg-light text-center shadow-lg">
                                                    <div class="card-body row rounded" style="background-color: black;width: 30em;margin: 0 auto;">
                                                        <div class="row m-0 gradientechange-2 mt-3 ">
                                                            <img class="img-fluid"  style="max-width: 100%;max-height:15em" src="https://img.freepik.com/foto-gratis/empresario-corporativo-dando-presentacion-gran-audiencia_53876-101865.jpg" alt="Alternate Text" />
                                                        </div>
                                                     <div class="card-header ">
                                                            <h3 class="text-gradientechange m-0">
                                                                Evento: ${data.data[i].Nombre}
                                                            </h3>
                                                    </div>
                                                    <div class="row m-0 mt-2">
                                                        <div class="d-flex justify-content-around align-items-center">
                                                            <p class="card-text text-light fontline me-2" style="display:none"> Idevento ${data.data[i].IdEvento}</p>
                                                            <p class="card-text IdEvento fontline text-black me-2" >${data.data[i].IdEvento}</p>
                                                            <p class="card-text text-light fontline me-2">Fecha:${data.data[i].Fecha}</p>
                                                             <p class="card-text text-light fontline me-2">Transporte:${tr}</p>
                                                        
                                                             <button type="button"  class="desaprobated btn btn-danger">Descartar</button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="card-footer text-muted">
                                                    2 days ago
                                                </div>
                                            </div>`;
                            $(list2).find(".desaprobated").click(function () {
                                var buttons = document.querySelectorAll(".desaprobated");
                                buttons.forEach(function (button) {
                                    button.addEventListener("click", function (event) {
                                        var tarjeta = event.target.parentNode;

                                        var idEvento = tarjeta.querySelector("p.IdEvento").innerHTML;
                                        console.log(idEvento)
                                        DescEventoC(idEvento)
                                    });
                                });

                            });
                        } else if (data.data[i].estado == 3) {
                            list3.innerHTML += `<div id="cardtext" class="container bg-light text-center shadow-lg">
                                                    <div class="card-body row rounded" style="background-color: black;width: 30em;margin: 0 auto;">
                                                        <div class="row m-0 gradientechange-2 mt-3 ">
                                                            <img class="img-fluid"  style="max-width: 100%;max-height:15em" src="https://img.freepik.com/foto-gratis/empresario-corporativo-dando-presentacion-gran-audiencia_53876-101865.jpg" alt="Alternate Text" />
                                                        </div>
                                                     <div class="card-header ">
                                                            <h3 class="text-gradientechange m-0">
                                                                Evento: ${data.data[i].Nombre}
                                                            </h3>
                                                    </div>
                                                    <div class="row m-0 mt-2">
                                                        <div class="d-flex justify-content-around  align-items-center">
                                                            <p class="card-text text-light fontline me-2" style="display:none"> Idevento ${data.data[i].IdEvento}</p>
                                                            <p class="card-text IdEvento fontline text-black me-2" >${data.data[i].IdEvento}</p>
                                                            <p class="card-text text-light fontline me-2">Fecha:${data.data[i].Fecha}</p>
                                                             <p class="card-text text-light fontline me-2">Transporte:${tr}</p>
                                                         
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="card-footer text-muted">
                                                    2 days ago
                                                </div>
                                            </div>`;
                        } else {
                                  list4.innerHTML += `<div id="cardtext" class="container bg-light text-center shadow-lg">
                                                    <div class="card-body row rounded" style="background-color: black;width: 30em;margin: 0 auto;">
                                                        <div class="row m-0 gradientechange-2 mt-3 ">
                                                            <img class="img-fluid"  style="max-width: 100%;max-height:15em" src="https://img.freepik.com/foto-gratis/empresario-corporativo-dando-presentacion-gran-audiencia_53876-101865.jpg" alt="Alternate Text" />
                                                        </div>
                                                     <div class="card-header ">
                                                            <h3 class="text-gradientechange m-0">
                                                                Evento: ${data.data[i].Nombre}
                                                            </h3>
                                                    </div>
                                                    <div class="row m-0 mt-2">
                                                        <div class="d-flex justify-content-around align-items-center">
                                                            <p class="card-text text-light me-2" fontline style="display:none"> Idevento ${data.data[i].IdEvento}</p>
                                                            <p class="card-text IdEvento text-black fontline me-2" >${data.data[i].IdEvento}</p>
                                                            <p class="card-text text-light fontline me-2">Fecha:${data.data[i].Fecha}</p>
                                                             <p class="card-text text-light fontline me-2">Transporte:${tr}</p>
                                                         
                                                             <button type="button"  class="desaprobated btn btn-danger">Descartar</button>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="card-footer text-muted">
                                                    2 days ago
                                                </div>
                                  </div>`;
                            $(list4).find(".desaprobated").click(function () {
                                var buttons = document.querySelectorAll(".desaprobated");
                                buttons.forEach(function (button) {
                                    button.addEventListener("click", function (event) {
                                        var tarjeta = event.target.parentNode;

                                        var idEvento = tarjeta.querySelector("p.IdEvento").innerHTML;
                                        console.log(idEvento)
                                        DescEventoC(idEvento)
                                    });
                                });

                            });
                               }

                    }
                });
    }

    // Obtenemos los elementos de los botones y divs
    const boton1 = document.getElementById("btnradio1");
    const boton2 = document.getElementById("btnradio2");
    const boton3 = document.getElementById("btnradio3");
    const boton4 = document.getElementById("btnradio4");

    // Función para mostrar un div y ocultar los demás
    function mostrarDiv(div) {
        div.style.display = "block"; // Mostramos el div
        // Ocultamos los demás divs
        if (div !== list1) {
            list1.style.display = "none";
        }
        if (div !== list2) {
            list2.style.display = "none";
        }
        if (div !== list3) {
            list3.style.display = "none";
        }
        if (div !== list4) {
            list4.style.display = "none";
        }
    }
    // Agregamos el evento de clic a cada botón
    boton1.addEventListener("click", function () {
        mostrarDiv(list1);
    });
    boton2.addEventListener("click", function () {
        mostrarDiv(list2);
    });
    boton3.addEventListener("click", function () {
        mostrarDiv(list3);
    });
    boton4.addEventListener("click", function () {
        mostrarDiv(list4);
    });



    function AprobarEvent(IdEvento) {

            let url2 = "@Url.Action("AprobarEvent", "Event")";
            data = { eventoid: IdEvento }
        console.log(data = { eventoid: IdEvento })
            $.post(url2, data).done(function (data) {
                console.log(data);
            });


            window.location.reload()
    }
        function DescEventoC(IdEvento) {



            var url2 = "@Url.Action("DesCevent", "Event")";

            data = { eventoid: IdEvento }
            console.log(data = { eventoid: IdEvento })
            $.post(url2, data).done(function (data) {
                console.log(data);
            });

            window.location.reload()
        }

</script>